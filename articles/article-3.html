<!DOCTYPE html>
<html lang="en">

<!-- HEADER -->
<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161931112-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-161931112-1');
  </script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />


  <!-- UPDATE THESE -->

  <!-- Facebook tags -->
  <meta property="og:title" content="Multiplicity">
  <meta property="og:description" content="Global examinations of youth, tech & society.">
  <meta property="og:image" content="sample-logo.jpg"> 
  <meta property="og:url" content="http://multiplicitytech.github.io"> 
  <meta property="og:site_name" content="Multiplicity">


  <!-- Twitter tags -->
  <meta name="twitter:title" content="Multiplicity">
  <meta name="twitter:description" content="Global examinations of youth, tech & society.">
  <meta name="twitter:image" content="sample-logo.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image:alt" content="multiplicity logo">

  <!-- <meta name="twitter:site" content="@multiplicity_tech"> -->


  <title>Multiplicity</title>

  <!-- Bootstrap core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../stylesheet.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet"> 

  <!-- Include Handlebars.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


  <script src="../script.js"></script>

</head>

<body onload="Timer()" class="d-flex flex-column">


  <!-- Header & Nav -->
  <nav class="navbar navbar-expand-lg">

    <div class="d-flex flex-grow-1">

      <span class="w-100 d-block"><!-- hidden spacer to center brand on mobile --></span>

      <a class="navbar-brand" href="/index.html">
        multiplicity<span class="sublogo">.resources</span>
      </a>

<!-- <script>
function Timer() {
  setTimeout(myTimeout1, 2000) 
  setTimeout(myTimeout2, 4000) 
  setTimeout(myTimeout3, 6000) 
}

function myTimeout1() {
  document.getElementById("sublogo").innerHTML = "politics";
}
function myTimeout2() {
  document.getElementById("sublogo").innerHTML = "community";
}
function myTimeout3() {
 document.getElementById("sublogo").innerHTML = "gaming";
}

</script> -->

<!-- d-lg-none -->
<div class="w-100 text-right">
  <button class="navbar-toggler flex-fill" type="button" data-toggle="collapse" data-target="#myNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse text-right w-100" id="myNavbar">
    <ul class="navbar-nav ml-auto flex-nowrap">
      <li class="nav-item">
        <a href="/about.html" class="nav-link">About</a>
      </li>
      <li class="nav-item">
        <a href="/archive.html" class="nav-link">Archive</a>
      </li>
    </ul>
  </div>

</div>

</div>

</nav>


<!-- Article -->

<div id="page-content">
  <div class="container text-center">
    <div class="row justify-content-center">

      <div class="col-md-10 article">

        <script id="article-template" type="text/x-handlebars-template">
          <h1 class="articeTitle"> {{article3.title}}</h1>
          <p class="byline">{{article3.byline}}</p>
          <p><span class="author">{{article3.author}}</span> | <span class="date"> {{article3.date}}</span> </p> 
          <p class="article-body">{{{article3.body}}}</p>
        </script>

        <div id="map1"></div>



        <!-- data vis -->      


        <script>
          var bounded = false;
          var pastLocation;
          var geojson;

          const mapboxAccessToken = 'pk.eyJ1Ijoic29oYWlsYmFnaGVyaSIsImEiOiJja2N0Mno0NGgwYWN0MnJudG1qcDFmZXlsIn0.Slzmp4JvAnT08GrpHiBDWg';

    const mymap = L.map('map1').setView([54, 13], 4); //europe

    const tileURL = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=' + mapboxAccessToken;

    const attribution = '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>';

    const tiles = L.tileLayer(tileURL, {id: 'mapbox/light-v9', attribution, tileSize: 512, zoomOffset: -1});
    tiles.addTo(mymap);


    function getColor(d) {
      return d > 65 ? '#bc3136' :
      d > 54  ? '#eb3e41' :
      d > 0  ? '#f3a63b' :
      '#f5b850';
    }

    function style(feature) {
      return {
        fillColor: getColor(feature.properties.changedPrivacySettings),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
      };
    }

    function highlightFeature(e) {
      var layer = e.target;

      layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
      });

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
      }
      info.update(layer.feature.properties);
    }

    function resetHighlight(e) {
      geojson.resetStyle(e.target);
      info.update();
    }

    function zoomToFeature(e) {
      if (bounded && pastLocation == e.target._bounds) {
        mymap.setView([51.74739, 10], 4);
        bounded = false;
      }
      else { 
        switch(e.target.feature.properties.name_long) { // islands far from mainland so need to change bounds
          case 'France':
          mymap.fitBounds([
            [51.1, 7.6],
            [41.5, -4.6]
            ]);
          break;

          case 'Spain':
          mymap.fitBounds([
            [44.4, 3.9],
            [35.4,-9.2]
            ]);       
          break;

          case 'Netherlands':
          mymap.fitBounds([
            [53.7, 7.6],
            [50.7, 3.2]
            ]);
          break;

          case 'Portugal':
          mymap.fitBounds([
            [42.4, -6.2],
            [36.4, -9.7]
            ]);
          break;

          default: // if not these special case countries then just go to bounds
          mymap.fitBounds(e.target.getBounds());
        }
        bounded = true;
        pastLocation = e.target._bounds;        
      }
    }

    function onEachFeature(feature, layer) {
      layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
      });
    }


    // Custom Info Control
    var info = L.control();

    info.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
        this.update();
        return this._div;
      };

    // method that we will use to update the control based on feature properties passed
    info.update = function (props) {
      this._div.innerHTML = '<h4>Changed privacy settings from default on social media?</h4>' +  (props ?
        '<b>' + props.name_long + '</b><br/>' + props.changedPrivacySettings + '% yes'
        : 'Hover over a country');
    };


    // Custom Legend Control
    var legend = L.control({position: 'bottomright'});

    legend.onAdd = function (map) {

      var div = L.DomUtil.create('div', 'info legend'),
      grades = [0, 54, 65, 100],
      labels = [];

        // loop through our density intervals and generate a label with a colored square for each interval
        for (var i = 0; i < grades.length - 1; i++) {
          div.innerHTML +=
          '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
          grades[i] + (grades[i + 1] ? '% &ndash; ' + grades[i + 1] + '%<br>' : '');
        }

        return div;
      };

      geojson = L.geoJson(europe_data, {
        style: style,
        onEachFeature: onEachFeature
      }).addTo(mymap);

      info.addTo(mymap);  
      legend.addTo(mymap);

    </script>



    <!--Article will be displayed here-->
    <div class="article-placeholder"></div>

  </div>

</div>
</div>
</div>

<!-- Footer -->

<footer id="sticky-footer" class="py-1 bg-dark text-white">
  <div class="container text-center">
    <small>&copy; multiplicity, 2020</small>
  </div>
</footer>



<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.slim.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


</body>

</html>
